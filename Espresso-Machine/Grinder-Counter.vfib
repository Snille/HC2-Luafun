{"name":"Kaffekvarnsräknare","type":"virtual_device","properties":{"deviceIcon":0,"currentIcon":"0","log":"","logTemp":"","mainLoop":"","visible":"true","rows":[{"type":"button","elements":[{"id":1,"lua":true,"waitForResponse":false,"caption":"Lägg till 1 mald kopp","name":"action1","empty":false,"msg":"--\n-- To use this Device you need to have the PHP scripts and a MySQL database.\n-- Enter the IP and port of the database server in this device IP and Port.\n--\n\nlocal device = fibaro:getSelfId();\nlocal ipaddress = fibaro:getValue(device, \"IPAddress\"); -- Set the IP of the device to the IP of your SONOS-HTTP-API\nlocal port = fibaro:getValue(device, \"TCPPort\");\nlocal addscript = \"grindercount.php\"; -- Name of the script to trigger the add.\nlocal sensorid = 73; -- The ID of the grinder in the database.\nlocal value = 1; -- How many grinds to add when triggered.\n\n-- Sends the data to the database.\nsonos = Net.FHttp(ipaddress, port);\nresponse = sonos:GET(\"/housedata/\" ..addscript.. \"?sensorid=\" ..sensorid.. \"&value=\" ..value);\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":2,"lua":true,"waitForResponse":false,"caption":"Lägg till 2 malda koppar","name":"action2","empty":false,"msg":"local device = fibaro:getSelfId();\nlocal ipaddress = fibaro:getValue(device, \"IPAddress\"); -- Set the IP of the device to the IP of your SONOS-HTTP-API\nlocal port = fibaro:getValue(device, \"TCPPort\");\nlocal addscript = \"grindercount.php\"; -- Name of the script to trigger the add.\nlocal sensorid = 73; -- The ID of the grinder in the database.\nlocal value = 2; -- How many grinds to add when triggered.\n\n-- Sends the data to the database.\nsonos = Net.FHttp(ipaddress, port);\nresponse = sonos:GET(\"/housedata/\" ..addscript.. \"?sensorid=\" ..sensorid.. \"&value=\" ..value);\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":3,"lua":true,"waitForResponse":false,"caption":"Lägg till 3 malda koppar","name":"action3","empty":false,"msg":"local device = fibaro:getSelfId();\nlocal ipaddress = fibaro:getValue(device, \"IPAddress\"); -- Set the IP of the device to the IP of your SONOS-HTTP-API\nlocal port = fibaro:getValue(device, \"TCPPort\");\nlocal addscript = \"grindercount.php\"; -- Name of the script to trigger the add.\nlocal sensorid = 73; -- The ID of the grinder in the database.\nlocal value = 3; -- How many grinds to add when triggered.\n\n-- Sends the data to the database.\nsonos = Net.FHttp(ipaddress, port);\nresponse = sonos:GET(\"/housedata/\" ..addscript.. \"?sensorid=\" ..sensorid.. \"&value=\" ..value);\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":4,"lua":true,"waitForResponse":false,"caption":"Lägg till 4 malda koppar","name":"action4","empty":false,"msg":"local device = fibaro:getSelfId();\nlocal ipaddress = fibaro:getValue(device, \"IPAddress\"); -- Set the IP of the device to the IP of your SONOS-HTTP-API\nlocal port = fibaro:getValue(device, \"TCPPort\");\nlocal addscript = \"grindercount.php\"; -- Name of the script to trigger the add.\nlocal sensorid = 73; -- The ID of the grinder in the database.\nlocal value = 4; -- How many grinds to add when triggered.\n\n-- Sends the data to the database.\nsonos = Net.FHttp(ipaddress, port);\nresponse = sonos:GET(\"/housedata/\" ..addscript.. \"?sensorid=\" ..sensorid.. \"&value=\" ..value);\n","buttonIcon":0,"favourite":false,"main":false}]}]},"actions":{"pressButton":1,"setSlider":2,"setProperty":2}}